"use strict";(self["webpackChunkvuecli_router_vuer"]=self["webpackChunkvuecli_router_vuer"]||[]).push([[812],{2812:function(e,s,t){t.r(s),t.d(s,{default:function(){return g}});var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"mymessage"},[t("div",{staticClass:"top"}),t("div",[t("button",{staticClass:"btn_message",class:{active:1==e.tab},on:{click:function(s){e.tab=1,e.queryMy()}}},[e._v("留言")]),t("button",{staticClass:"btn_comments",class:{active:2==e.tab},on:{click:function(s){e.tab=2}}},[e._v("评论")])]),1==e.tab?t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"outer"},[e._m(0),e._l(e.list,(function(s){return t("div",{key:s.uid,staticClass:"Messagelist"},[t("div",[t("img",{staticClass:"user_img",attrs:{src:s.userInfo.img,alt:""}})]),t("div",{staticClass:"message_info"},[t("div",[t("div",{staticClass:"user_name"},[e._v(e._s(s.user.nickname))]),t("div")]),t("div",{staticClass:"message_time"},[e._v(e._s(e._f("timer")(s.lastupdate)))]),t("div",[e._v(e._s(s.title))]),t("div",{staticClass:"operate"},[t("div",[t("i",{staticClass:"iconfont"},[e._v("")]),t("span",[e._v(e._s(s.praiseCount))])]),t("div",[t("i",{staticClass:"iconfont"},[e._v("")]),t("span",[e._v(e._s(s.replyCount))])]),t("div",{staticClass:"del",on:{click:function(t){return e.deleteMessage(s)}}},[t("i",{staticClass:"iconfont"},[e._v("")]),t("span",{staticClass:"del_font"},[e._v("删除")])])])])])})),t("el-pagination",{attrs:{"hide-on-single-page":"","current-page":e.messageInfo.page.pageNumber,"page-size":100,layout:"prev, pager, next, jumper",total:e.messageInfo.page.total},on:{"current-change":e.queryMy,"update:currentPage":function(s){return e.$set(e.messageInfo.page,"pageNumber",s)},"update:current-page":function(s){return e.$set(e.messageInfo.page,"pageNumber",s)}}})],2):e._e(),2==e.tab?t("div"):e._e()])},i=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"query_btn"},[t("div",[e._v(" 按照发帖时间降序 "),t("i",{staticClass:"el-icon-caret-top"},[e._v("")])]),t("div",[e._v(" 按照发帖时间升序 "),t("i",{staticClass:"el-icon-caret-bottom"},[e._v("")])]),t("div")])}],n=t(9868);let l;var r={name:"MymessageView",data(){return{tab:1,title:"用户动态",list:[],loading:!1,messageInfo:{orderBy:"",page:{pageNumber:1,pageSize:5}}}},methods:{queryMy(){l.loading=!0,n.Z.ajax("/message/manage/queryUserAll",{},(e=>{console.log(e),e.success&&(l.list=e.list,l.messageInfo.page=e.page,l.loading=!1,console.log(l.list))}))},queryComments(){},deleteMessage(e){l.delDialogVisible=!0,l.$confirm("是否删除《"+e.title+"》这条动态?","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{n.Z.ajax("/message/manage/deletUserMessage",{umid:e.umid},(e=>{e.success?(l.$message({type:"success",message:"删除成功!"}),l.queryMy()):l.$message({type:"error",message:"删除失败!"})}))})).catch((()=>{l.$message({type:"info",message:"已取消删除"})})),console.log(e)}},created(){l=this,l.queryMy()}},c=r,o=t(1001),u=(0,o.Z)(c,a,i,!1,null,null,null),g=u.exports}}]);