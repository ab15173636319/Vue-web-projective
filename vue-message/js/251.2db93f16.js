"use strict";(self["webpackChunkvuecli_router_vuer"]=self["webpackChunkvuecli_router_vuer"]||[]).push([[251],{7251:function(e,s,t){t.r(s),t.d(s,{default:function(){return d}});var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("login-query-info"),t("nav",{staticClass:"topChatUserInfo"},[t("div",[t("img",{attrs:{src:e.data.tbUserInfo.img,alt:""}}),t("div",[e._v(e._s(e.data.tbUser.nickname))])])]),t("div",{staticClass:"chatmessage"},[t("div",{staticClass:"chatmessagebody"},e._l(e.chatlist,(function(s){return t("div",{key:s,staticClass:"chatlist"},[t("div",[t("div",{staticClass:"chatuserinfo"},[t("img",{attrs:{src:e.data.tbUserInfo.img,alt:""}}),t("div",[e._v(e._s(s.from))])]),t("div",{staticClass:"chatinfo",class:{active:s.from==e.userinfo.tbUser.username}},[e._v(e._s(s.info))]),s.read?t("span",{staticClass:"iconfont icon-yanjing chatok"}):t("span",{staticClass:"iconfont icon-guanyu chatno"})])])})),0)]),t("div",{staticClass:"chatbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.sendinfo.info,expression:"sendinfo.info"}],staticClass:"textarea",domProps:{value:e.sendinfo.info},on:{input:function(s){s.target.composing||e.$set(e.sendinfo,"info",s.target.value)}}}),t("span",{on:{click:function(s){return e.SendChat()}}},[e._v("发送")])]),t("bei-an")],1)},n=[],i=t(9868),r=t(9376),o=t(2996),u={components:{LoginQueryInfo:r.Z,BeiAn:o.Z},name:"ChatWith",data(){return{title:"聊天界面",username:this.$route.query.username,data:{},chatlist:[],sendinfo:{username:"",info:""}}},computed:{userinfo(){return this.$store.state.loginUser}},methods:{SendChat(){this.sendinfo.username=this.username,i.Z.ajax("/user/auth/sendMesage",this.sendinfo,(e=>{e.success&&(this.GetChatMessage(),this.sendinfo.info="")}))},GetChatUserInfo(){i.Z.ajax("/user/auth/getUserInfoByName",{username:this.username},(e=>{this.data=e}))},GetChatMessage(){i.Z.ajax("/user/auth/findPrivateMessageByUser",{username:this.username},(e=>{console.log(e),this.chatlist=e.list}))},ReadMessage(){i.Z.ajax("/user/auth/readPrivateMessageByUser",{username:this.username})}},created(){console.log(this.userinfo),this.GetChatUserInfo(),this.GetChatMessage(),this.ReadMessage()}},c=u,h=t(1001),f=(0,h.Z)(c,a,n,!1,null,"20bfccc7",null),d=f.exports}}]);