"use strict";(self["webpackChunkvuecli_router_vuer"]=self["webpackChunkvuecli_router_vuer"]||[]).push([[367],{4367:function(e,s,i){i.r(s),i.d(s,{default:function(){return _}});var t=function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("div",[e.loading?i("load-view"):e._e(),i("login-query-info",{attrs:{LoginIsVisible:e.LoginProp}}),i("div",{staticClass:"Back"},[i("i",{staticClass:"iconfont icon-fanhui1",on:{click:function(s){return e.$router.back()}}}),i("div",{staticClass:"title"},[i("div",{staticClass:"title-title"},[e._v(e._s(e.info.title))]),i("div",{staticClass:"title-user"},[i("div",{staticClass:"title-author"},[e._v(" 作者："),i("div",{on:{click:function(s){return e.ToUserCebter()}}},[e._v(e._s(e.user.nickname)+" ")])]),i("div",[e._v("|")]),i("div",[e._v("发布时间:"+e._s(e._f("timer")(e.info.lastupdate))+" ")])])]),i("div",{staticClass:"title-user-img"},[i("img",{attrs:{src:e.userInfo.img,alt:""},on:{click:function(s){return e.ToUserCebter()}}})])]),i("div",{staticClass:"messageBody"},[i("div",{staticClass:"message-out"},[i("div",{staticClass:"message-info",domProps:{innerHTML:e._s(e.info.info)}})]),i("div",{staticClass:"prise"},[i("div",[i("i",{staticClass:"iconfont icon-dianzan1 hover",class:{active:1==e.info.praise},on:{click:function(s){return e.PriseForMessage(e.info.umid)}}}),1==e.info.praise?i("i",{staticClass:"display",staticStyle:{color:"red"}},[e._v("已点赞("+e._s(e.info.praiseCount)+")")]):i("i",{staticClass:"display"},[e._v("点赞("+e._s(e.info.praiseCount)+")")])]),i("div",[i("i",{staticClass:"iconfont icon-yanjing hover2"}),i("i",{staticClass:"display"},[e._v("点击量("+e._s(e.info.hits)+")")])]),e._m(0),i("div",[i("i",{staticClass:"iconfont icon-chakantiezigengduojubao hover",on:{click:function(s){e.JBVisible=!0,e.JBumid=e.info.umid}}}),i("i",{staticClass:"display"},[e._v("举报")])]),i("div",[e.userOtherInfo.mineFollow?i("i",{staticClass:"iconfont icon-yiguanzhu hover",staticStyle:{"font-weight":"300",color:"red"},on:{click:function(s){return e.followUser(e.user.username)}}}):i("i",{staticClass:"iconfont icon-guanzhu hover",staticStyle:{"font-weight":"300"},on:{click:function(s){return e.followUser(e.user.username)}}}),e.userOtherInfo.mineFollow?i("i",{staticClass:"display",staticStyle:{color:"red"}},[e._v("已关注")]):i("i",{staticClass:"display"},[e._v("关注")])])])]),i("el-dialog",{attrs:{"close-on-press-escape":!1,title:"举报",visible:e.JBVisible,width:"30%",center:""},on:{"update:visible":function(s){e.JBVisible=s}}},[i("span",[i("el-input",{attrs:{type:"textarea",placeholder:"举报的原因"},model:{value:e.JBinfo,callback:function(s){e.JBinfo=s},expression:"JBinfo"}})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(s){e.JBVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(s){return e.JBmessage()}}},[e._v("确 定")])],1)]),e._m(1),i("div",{staticClass:"comment"},[i("div",{staticClass:"CommentHeat"},[i("div",[i("span",[e._v("评论")]),i("span",[e._v(e._s(e.info.replyCount))])]),i("div",[i("span",{class:{active:1==e.orderBy},on:{click:function(s){e.orderBy=1}}},[e._v("时间")]),i("span",[e._v("|")]),i("span",{class:{active:2==e.orderBy},on:{click:function(s){e.orderBy=2}}},[e._v("热度")])])]),e._m(2),e.CommomVisible?i("div",{staticClass:"nocomment"},[e._v("还没有人评论哦，快来沙发吧(づ￣ 3￣)づ ")]):e._l(e.commentlist,(function(s){return i("div",{key:s.umrid,staticClass:"comment-body"},[i("div",[i("img",{staticClass:"comment-img",attrs:{src:s.userInfo.img,alt:""}}),i("div",[e._v(e._s(s.user.nickname))])]),i("div",{staticClass:"comment-info"},[i("div",{staticClass:"comment-title"},[e._v(e._s(s.info))]),i("div",{staticClass:"comment-info-other"},[i("div",{staticClass:"comment-operate"},[i("div",[i("i",{staticClass:"iconfont hover",class:{active:s.praise},on:{click:function(i){return e.praiseComment(s.umrid)}}},[e._v("")]),1==s.praise?i("i",{staticClass:"display",staticStyle:{color:"red"}},[e._v("已点赞("+e._s(s.praiseCount)+")")]):i("i",{staticClass:"display"},[e._v("点赞("+e._s(s.praiseCount)+")")])]),e._m(3,!0),i("div",[i("i",{staticClass:"iconfont hover",on:{click:function(i){e.JBCVisible=!0,e.JBcumrid=s.umrid}}},[e._v("")]),i("i",{staticClass:"display"},[e._v("举报")])])]),i("div",{staticClass:"comment-time"},[i("div",[e._v(e._s(e._f("timer")(s.lastupdate)))])])])])])})),i("div",{staticClass:"block"},[i("el-pagination",{attrs:{"hide-on-single-page":!0,"page-size":e.page.pageSize,layout:"total, prev, pager, next, jumper",total:e.page.total},on:{"current-change":e.handleCurrentChange}})],1)],2),i("el-dialog",{attrs:{"close-on-press-escape":!1,title:"举报",visible:e.JBCVisible,width:"30%",center:""},on:{"update:visible":function(s){e.JBCVisible=s}}},[i("span",[i("el-input",{attrs:{type:"textarea",placeholder:"举报的原因"},model:{value:e.JBCinfo,callback:function(s){e.JBCinfo=s},expression:"JBCinfo"}})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(s){e.JBCVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(s){return e.JBmessage()}}},[e._v("确 定")])],1)]),i("bei-an")],1)},a=[function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("div",[i("i",{staticClass:"iconfont icon-pingbi1 hover"}),i("i",{staticClass:"display"},[e._v("屏蔽")])])},function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("div",{staticClass:"center-line"},[i("div")])},function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("div",{staticClass:"AddComment"},[i("input",{attrs:{type:"text",placeholder:"快来沙发╭(′▽`)╭(′▽`)╯"}}),i("button",[e._v("评论")])])},function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("div",[i("i",{staticClass:"iconfont hover"},[e._v("")]),i("i",{staticClass:"display"},[e._v("屏蔽")])])}],n=i(9868),o=function(){var e=this,s=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("div",{staticClass:"o"},[i("div",{staticClass:"pan-loading"},[i("div",{staticClass:"loading"},[i("span",[e._v("正")]),i("span",[e._v("在")]),i("span",[e._v("加")]),i("span",[e._v("载")])]),i("div",{staticClass:"pan-container"},[i("div",{staticClass:"pan"}),i("div",{staticClass:"handle"})]),i("div",{staticClass:"shadow"})])])}],l=i(1001),c={},u=(0,l.Z)(c,o,r,!1,null,"4556ade1",null),d=u.exports,m=i(9376),v=i(2996);let f;var p={components:{LoadView:d,LoginQueryInfo:m.Z,BeiAn:v.Z},name:"MessageDetail",data(){return{title:"留言详情",LoginVisible:!1,loading:!1,umid:"",info:"",user:"",userInfo:"",userOtherInfo:"",page:{},commentlist:{},JBVisible:!1,JBinfo:"",JBumid:0,JBCVisible:!1,JBCinfo:"",JBcumrid:0,LoginProp:!1,CommomVisible:!1,orderBy:1}},computed:{userinfo(){return this.$store.state.loginUser}},methods:{ToUserCebter(){f.$router.push({path:"/UserDetail",query:{what:"themself",username:f.user.username}})},handleCurrentChange(e){f.page.pageNumber=e,console.log(`当前页: ${e}`),f.queryMessage()},followUser(e){n.Z.ajax("/message/followUser",{username:e},(()=>{f.queryMessage()}))},JBcommont(){n.Z.ajax("/message/examineReply",{info:f.JBCinfo,umrid:f.JBcumrid},(e=>{e.success&&(f.JBCVisible=!1,f.queryMessage()),f.$message.warning(e.message)}))},JBmessage(){f.$message.success(f.JBumid),n.Z.ajax("/message/examine",{info:f.JBinfo,umid:f.JBumid},(e=>{e.success&&(f.JBVisible=!1,f.queryMessage()),f.$message.warning(e.message)}))},praiseComment(e){n.Z.ajax("/message/supportReply",{umrid:e},(()=>{this.queryMessage()}))},queryUmid(){f.umid=f.$route.query.umid},queryMessage(){n.Z.ajax("/message/queryDetail",{umid:f.umid,pageNumber:f.page.pageNumber,pageSize:5,orderBy:f.orderBy},(e=>{f.info=e.info,f.user=e.info.user,f.commentlist=e.list,0==f.commentlist.length&&(f.CommomVisible=!0),f.page=e.page,f.userOtherInfo=f.info.userOtherInfo,f.userInfo=f.info.userInfo}))},PriseForMessage(e){1==f.userinfo.isLogin?n.Z.ajax("/message/support",{umid:e},(e=>{e.success?f.queryMessage():f.$message.error(e.message)})):(f.LoginProp=!0,console.log(f.LoginProp))}},created(){f=this,f.queryUmid(),f.queryMessage()},watch:{orderBy(){f.queryMessage()}}},g=p,C=(0,l.Z)(g,t,a,!1,null,"5ee674ce",null),_=C.exports}}]);