"use strict";(self["webpackChunkvuecli_router_vuer"]=self["webpackChunkvuecli_router_vuer"]||[]).push([[251],{17251:function(e,s,t){t.r(s),t.d(s,{default:function(){return d}});var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("login-query-info"),t("nav",{staticClass:"topChatUserInfo"},[t("div",[t("img",{attrs:{src:e.data.tbUserInfo.img,alt:""}}),t("div",[e._v(e._s(e.data.tbUser.nickname))])])]),t("div",{staticClass:"chatmessage"},[t("div",{staticClass:"chatmessagebody"},e._l(e.chatlist,(function(s){return t("div",{key:s,staticClass:"chatlist"},[t("div",[t("div",{staticClass:"chatuserinfo"},[t("img",{attrs:{src:e.data.tbUserInfo.img,alt:""}}),t("div",[e._v(e._s(s.from))])]),t("div",{staticClass:"chatinfo",class:{active:s.from==e.userinfo.tbUser.username}},[e._v(e._s(s.info))]),s.read?t("span",{staticClass:"iconfont icon-yanjing chatok"}):t("span",{staticClass:"iconfont icon-guanyu chatno"})])])})),0)]),t("div",{staticClass:"chatbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.sendinfo.info,expression:"sendinfo.info"}],staticClass:"textarea",domProps:{value:e.sendinfo.info},on:{input:function(s){s.target.composing||e.$set(e.sendinfo,"info",s.target.value)}}}),t("span",{on:{click:function(s){return e.SendChat()}}},[e._v("发送")])]),t("bei-an")],1)},n=[],i=t(19868),o=t(6768),r=t(22996),u={components:{LoginQueryInfo:o.Z,BeiAn:r.Z},name:"ChatWith",data:function(){return{title:"聊天界面",username:this.$route.query.username,data:{},chatlist:[],sendinfo:{username:"",info:""}}},computed:{userinfo:function(){return this.$store.state.loginUser}},methods:{SendChat:function(){var e=this;this.sendinfo.username=this.username,i.Z.ajax("/user/auth/sendMesage",this.sendinfo,(function(s){s.success&&(e.GetChatMessage(),e.sendinfo.info="")}))},GetChatUserInfo:function(){var e=this;i.Z.ajax("/user/auth/getUserInfoByName",{username:this.username},(function(s){e.data=s}))},GetChatMessage:function(){var e=this;i.Z.ajax("/user/auth/findPrivateMessageByUser",{username:this.username},(function(s){console.log(s),e.chatlist=s.list}))},ReadMessage:function(){i.Z.ajax("/user/auth/readPrivateMessageByUser",{username:this.username})}},created:function(){console.log(this.userinfo),this.GetChatUserInfo(),this.GetChatMessage(),this.ReadMessage()}},c=u,f=t(1001),h=(0,f.Z)(c,a,n,!1,null,"20bfccc7",null),d=h.exports}}]);