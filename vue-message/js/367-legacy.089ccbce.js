"use strict";(self["webpackChunkvuecli_router_vuer"]=self["webpackChunkvuecli_router_vuer"]||[]).push([[367],{4367:function(e,i,s){s.r(i),s.d(i,{default:function(){return _}});var t,n=function(){var e=this,i=e.$createElement,s=e._self._c||i;return s("div",[e.loading?s("load-view"):e._e(),s("login-query-info",{attrs:{LoginIsVisible:e.LoginProp}}),s("div",{staticClass:"Back"},[s("i",{staticClass:"iconfont icon-fanhui1",on:{click:function(i){return e.$router.back()}}}),s("div",{staticClass:"title"},[s("div",{staticClass:"title-title"},[e._v(e._s(e.info.title))]),s("div",{staticClass:"title-user"},[s("div",{staticClass:"title-author"},[e._v(" 作者："),s("div",{on:{click:function(i){return e.ToUserCebter()}}},[e._v(e._s(e.user.nickname)+" ")])]),s("div",[e._v("|")]),s("div",[e._v("发布时间:"+e._s(e._f("timer")(e.info.lastupdate))+" ")])])]),s("div",{staticClass:"title-user-img"},[s("img",{attrs:{src:e.userInfo.img,alt:""},on:{click:function(i){return e.ToUserCebter()}}})])]),s("div",{staticClass:"messageBody"},[s("div",{staticClass:"message-out"},[s("div",{staticClass:"message-info",domProps:{innerHTML:e._s(e.info.info)}})]),s("div",{staticClass:"prise"},[s("div",[s("i",{staticClass:"iconfont icon-dianzan1 hover",class:{active:1==e.info.praise},on:{click:function(i){return e.PriseForMessage(e.info.umid)}}}),1==e.info.praise?s("i",{staticClass:"display",staticStyle:{color:"red"}},[e._v("已点赞("+e._s(e.info.praiseCount)+")")]):s("i",{staticClass:"display"},[e._v("点赞("+e._s(e.info.praiseCount)+")")])]),s("div",[s("i",{staticClass:"iconfont icon-yanjing hover2"}),s("i",{staticClass:"display"},[e._v("点击量("+e._s(e.info.hits)+")")])]),e._m(0),s("div",[s("i",{staticClass:"iconfont icon-chakantiezigengduojubao hover",on:{click:function(i){e.JBVisible=!0,e.JBumid=e.info.umid}}}),s("i",{staticClass:"display"},[e._v("举报")])]),s("div",[e.userOtherInfo.mineFollow?s("i",{staticClass:"iconfont icon-yiguanzhu hover",staticStyle:{"font-weight":"300",color:"red"},on:{click:function(i){return e.followUser(e.user.username)}}}):s("i",{staticClass:"iconfont icon-guanzhu hover",staticStyle:{"font-weight":"300"},on:{click:function(i){return e.followUser(e.user.username)}}}),e.userOtherInfo.mineFollow?s("i",{staticClass:"display",staticStyle:{color:"red"}},[e._v("已关注")]):s("i",{staticClass:"display"},[e._v("关注")])])])]),s("el-dialog",{attrs:{"close-on-press-escape":!1,title:"举报",visible:e.JBVisible,width:"30%",center:""},on:{"update:visible":function(i){e.JBVisible=i}}},[s("span",[s("el-input",{attrs:{type:"textarea",placeholder:"举报的原因"},model:{value:e.JBinfo,callback:function(i){e.JBinfo=i},expression:"JBinfo"}})],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(i){e.JBVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(i){return e.JBmessage()}}},[e._v("确 定")])],1)]),e._m(1),s("div",{staticClass:"comment"},[s("div",{staticClass:"CommentHeat"},[s("div",[s("span",[e._v("评论")]),s("span",[e._v(e._s(e.info.replyCount))])]),s("div",[s("span",{class:{active:1==e.orderBy},on:{click:function(i){e.orderBy=1}}},[e._v("时间")]),s("span",[e._v("|")]),s("span",{class:{active:2==e.orderBy},on:{click:function(i){e.orderBy=2}}},[e._v("热度")])])]),e._m(2),e.CommomVisible?s("div",{staticClass:"nocomment"},[e._v("还没有人评论哦，快来沙发吧(づ￣ 3￣)づ ")]):e._l(e.commentlist,(function(i){return s("div",{key:i.umrid,staticClass:"comment-body"},[s("div",[s("img",{staticClass:"comment-img",attrs:{src:i.userInfo.img,alt:""}}),s("div",[e._v(e._s(i.user.nickname))])]),s("div",{staticClass:"comment-info"},[s("div",{staticClass:"comment-title"},[e._v(e._s(i.info))]),s("div",{staticClass:"comment-info-other"},[s("div",{staticClass:"comment-operate"},[s("div",[s("i",{staticClass:"iconfont hover",class:{active:i.praise},on:{click:function(s){return e.praiseComment(i.umrid)}}},[e._v("")]),1==i.praise?s("i",{staticClass:"display",staticStyle:{color:"red"}},[e._v("已点赞("+e._s(i.praiseCount)+")")]):s("i",{staticClass:"display"},[e._v("点赞("+e._s(i.praiseCount)+")")])]),e._m(3,!0),s("div",[s("i",{staticClass:"iconfont hover",on:{click:function(s){e.JBCVisible=!0,e.JBcumrid=i.umrid}}},[e._v("")]),s("i",{staticClass:"display"},[e._v("举报")])])]),s("div",{staticClass:"comment-time"},[s("div",[e._v(e._s(e._f("timer")(i.lastupdate)))])])])])])})),s("div",{staticClass:"block"},[s("el-pagination",{attrs:{"hide-on-single-page":!0,"page-size":e.page.pageSize,layout:"total, prev, pager, next, jumper",total:e.page.total},on:{"current-change":e.handleCurrentChange}})],1)],2),s("el-dialog",{attrs:{"close-on-press-escape":!1,title:"举报",visible:e.JBCVisible,width:"30%",center:""},on:{"update:visible":function(i){e.JBCVisible=i}}},[s("span",[s("el-input",{attrs:{type:"textarea",placeholder:"举报的原因"},model:{value:e.JBCinfo,callback:function(i){e.JBCinfo=i},expression:"JBCinfo"}})],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(i){e.JBCVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(i){return e.JBmessage()}}},[e._v("确 定")])],1)]),s("bei-an")],1)},a=[function(){var e=this,i=e.$createElement,s=e._self._c||i;return s("div",[s("i",{staticClass:"iconfont icon-pingbi1 hover"}),s("i",{staticClass:"display"},[e._v("屏蔽")])])},function(){var e=this,i=e.$createElement,s=e._self._c||i;return s("div",{staticClass:"center-line"},[s("div")])},function(){var e=this,i=e.$createElement,s=e._self._c||i;return s("div",{staticClass:"AddComment"},[s("input",{attrs:{type:"text",placeholder:"快来沙发╭(′▽`)╭(′▽`)╯"}}),s("button",[e._v("评论")])])},function(){var e=this,i=e.$createElement,s=e._self._c||i;return s("div",[s("i",{staticClass:"iconfont hover"},[e._v("")]),s("i",{staticClass:"display"},[e._v("屏蔽")])])}],o=s(19868),r=function(){var e=this,i=e.$createElement;e._self._c;return e._m(0)},c=[function(){var e=this,i=e.$createElement,s=e._self._c||i;return s("div",{staticClass:"o"},[s("div",{staticClass:"pan-loading"},[s("div",{staticClass:"loading"},[s("span",[e._v("正")]),s("span",[e._v("在")]),s("span",[e._v("加")]),s("span",[e._v("载")])]),s("div",{staticClass:"pan-container"},[s("div",{staticClass:"pan"}),s("div",{staticClass:"handle"})]),s("div",{staticClass:"shadow"})])])}],l=s(1001),u={},d=(0,l.Z)(u,r,c,!1,null,"4556ade1",null),m=d.exports,f=s(6768),v=s(22996),p={components:{LoadView:m,LoginQueryInfo:f.Z,BeiAn:v.Z},name:"MessageDetail",data:function(){return{title:"留言详情",LoginVisible:!1,loading:!1,umid:"",info:"",user:"",userInfo:"",userOtherInfo:"",page:{},commentlist:{},JBVisible:!1,JBinfo:"",JBumid:0,JBCVisible:!1,JBCinfo:"",JBcumrid:0,LoginProp:!1,CommomVisible:!1,orderBy:1}},computed:{userinfo:function(){return this.$store.state.loginUser}},methods:{ToUserCebter:function(){t.$router.push({path:"/UserDetail",query:{what:"themself",username:t.user.username}})},handleCurrentChange:function(e){t.page.pageNumber=e,console.log("当前页: ".concat(e)),t.queryMessage()},followUser:function(e){o.Z.ajax("/message/followUser",{username:e},(function(){t.queryMessage()}))},JBcommont:function(){o.Z.ajax("/message/examineReply",{info:t.JBCinfo,umrid:t.JBcumrid},(function(e){e.success&&(t.JBCVisible=!1,t.queryMessage()),t.$message.warning(e.message)}))},JBmessage:function(){t.$message.success(t.JBumid),o.Z.ajax("/message/examine",{info:t.JBinfo,umid:t.JBumid},(function(e){e.success&&(t.JBVisible=!1,t.queryMessage()),t.$message.warning(e.message)}))},praiseComment:function(e){var i=this;o.Z.ajax("/message/supportReply",{umrid:e},(function(){i.queryMessage()}))},queryUmid:function(){t.umid=t.$route.query.umid},queryMessage:function(){o.Z.ajax("/message/queryDetail",{umid:t.umid,pageNumber:t.page.pageNumber,pageSize:5,orderBy:t.orderBy},(function(e){t.info=e.info,t.user=e.info.user,t.commentlist=e.list,0==t.commentlist.length&&(t.CommomVisible=!0),t.page=e.page,t.userOtherInfo=t.info.userOtherInfo,t.userInfo=t.info.userInfo}))},PriseForMessage:function(e){1==t.userinfo.isLogin?o.Z.ajax("/message/support",{umid:e},(function(e){e.success?t.queryMessage():t.$message.error(e.message)})):(t.LoginProp=!0,console.log(t.LoginProp))}},created:function(){t=this,t.queryUmid(),t.queryMessage()},watch:{orderBy:function(){t.queryMessage()}}},g=p,C=(0,l.Z)(g,n,a,!1,null,"5ee674ce",null),_=C.exports}}]);